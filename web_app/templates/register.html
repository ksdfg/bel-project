<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for(endpoint='static', filename='css/w3.css') }}">
    <link rel="stylesheet" href="{{ url_for(endpoint='static', filename='css/main.css') }}">

    <link rel="icon" href="{{ url_for(endpoint='static', filename='images/bel-icon.png') }}">
    <title>Register</title>
</head>

<body {% if error %} onload="document.getElementById('error-display').style.display = 'block'" {% endif %}>

<script type="application/javascript">
    function phoneValidate() {
        if (!Number.isInteger(Number(document.getElementById('number').value))) {
            document.getElementById('error-content').innerHTML = 'Invalid Contact Number'
            document.getElementById('error-display').style.display = 'Block'
        }
    }

    function emailValidate() {
        if (!document.getElementById('email').value.match('.+@.+\\..+')) {
            document.getElementById('error-content').innerHTML = 'Invalid E-Mail ID'
            document.getElementById('error-display').style.display = 'Block'
        }
    }
</script>

<div class="w3-container">

    <div class="w3-container w3-padding" style="font-size: xx-large; font-style: oblique">
        <b>Register</b>
        <img src="{{ url_for(endpoint='static', filename='images/bel.png') }}" align="right">
    </div>

    <div class="w3-bar peacock-blue">
        <button class="w3-bar-item w3-button" onclick="location.href = '/';" style="width: 10%">Home</button>
        <button class="w3-bar-item w3-button w3-right" onclick="location.href = '/login';" style="width: 10%">Login
        </button>
        <button class="w3-bar-item w3-button w3-right" onclick="location.href = '/register';" style="width: 10%">
            Register
        </button>
    </div>

    <br><br>

    {% if role %}

    <form name="registerUser" method="post" action="/register/submit">

        <div class="w3-container" style="padding-left: 20%; padding-right: 20%">

            {% if role == 'engineer' %}
            <label for="name" style="padding-left: 3%">
                <b>Name : </b><br>
            </label>
            <input type="text" id="name" name="name" {% if name %} value={{name}} {% endif %} style="width: 100%"
                   required><br><br>
            <label for="number" style="padding-left: 3%">
                <b>Contact Number : </b><br>
            </label>
            <input type="text" id="number" name="contact" minlength="10" maxlength="10"
                   {% if contact %} value={{contact}} {% endif %} style="width: 100%" onfocusout="phoneValidate()"
                   required><br><br>
            <label for="email" style="padding-left: 3%">
                <b>Email ID : </b><br>
            </label>
            <input type="text" id="email" name="email" {% if email %} style="width: 100%" value={{email}} {% endif %}
                   onfocusout="emailValidate()" style="width: 100%" required><br><br>
            <label for="region" style="padding-left: 3%">
                <b>Region : </b><br>
            </label>
            <select id="region" name="region" {% if region %} value={{region}} {% endif %} style="width: 100%" required>
                <option value="nr">North Region</option>
                <option value="er">East Region</option>
                <option value="wr">West Region</option>
                <option value="sr">South Region</option>
            </select><br><br>
            <label for="address" style="padding-left: 3%">
                <b>Address : </b><br>
            </label>
            <input type="text" id="address" name="address" {% if address %} value={{address}} {% endif %}
                   style="width: 100%"
                   required><br><br>
            {% endif %}

            {% if role == 'reg_mgr' %}
            <b>Region ID : </b>
            <input type="text" name="id" maxlength="2" {% if id %} value={{id}} {% endif %} required><br><br>
            <b>Address : </b>
            <input type="text" name="address" {% if address %} value={{address}} {% endif %} required><br><br>
            {% endif %}

            <b>Username : </b>
            <input type="text" name="username" maxlength="10" {% if username %} value={{username}} {% endif
                   %} style="width: 100%" required><br><br>
            <b>Password : </b>
            <input type="password" name="password" style="width: 100%" required><br><br>
            <b>Confirm Password : </b><input type="password" name="confirm password" style="width: 100%" required><br>
            <input name="role" value={{role}} style="visibility: hidden"><br>

        </div>

        <div class="w3-center">
            <input type="submit" value="Register" class="w3-btn w3-round-xxlarge peacock-blue">
        </div>
    </form>

    {% else %}

    <form name="registerForm" method="get" action="/register">
        <b>Select role of user : </b>
        <select name="role">
            <option value="engineer">Engineer</option>
            <option value="call_center">Call Center Operative</option>
            <option value="bel_mgr">BEL Manager</option>
            <option value="reg_mgr">Regional Center Manager</option>
        </select>
        <br><br>
        <input type="submit" value="Get Registration Form" class="w3-btn w3-round-xxlarge peacock-blue">
    </form>

    {% endif %}

    <div id="error-display" class="w3-modal">
        <div class="w3-modal-content w3-animate-top w3-card-4" style="width: 25%">
            <header class="w3-container w3-red w3-center">
                    <span onclick="document.getElementById('error-display').style.display='none'"
                          class="w3-button w3-display-topright">&times;</span>
                <h2>Error</h2>
            </header>
            <div class="w3-container w3-center">
                <p id="error-content">
                    {% if error %}
                    {{error}}
                    {% endif %}
                </p>
            </div>
        </div>
    </div>

</div>
</body>
</html>